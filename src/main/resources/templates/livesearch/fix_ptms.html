<%@ page import="javax.naming.Context" %>
<%@ page import="javax.naming.InitialContext" %>
<%@ page import="javax.sql.DataSource" %>
<%@ page import="java.sql.Connection" %>
<%@ page import="java.sql.PreparedStatement" %>
<%@ page import="java.sql.Statement" %>
<%@ page import="java.sql.ResultSet" %>
<%
	String id = (String)session.getAttribute("id");
	String var = request.getParameter("var");
	if (var == null)
		var = "1";
	String engine = request.getParameter("engine");
	if (engine == null)
		engine = "0";
	String action = request.getParameter("act1");
	if (action == null)
		action = "";
	String common = request.getParameter("act");
		if (common == null)
		common = "";

	Context initContext = new InitialContext();
	Context envContext = (Context)initContext.lookup("java:/comp/env");
	DataSource ds = (DataSource)envContext.lookup("jdbc/PrixDB");
	Connection conn = ds.getConnection();
	
	int addState = 0;
	int massState = 0;
	boolean finished = false;
	if (id != null && conn != null)
	{
		if (action.compareTo("add1") == 0)
		{
			if( request.getParameter("name1") == "" ){
				addState= 1;
			}
			else if( request.getParameter("name1").contains("|") || request.getParameter("name1").contains(" ") ){
				addState = 5;
			}
			else{
				if( request.getParameter("mass1") == "" ){
					addState= 2;
				}
				else{				
					try {
						Double.parseDouble( request.getParameter("mass1") );
						if(var.equals("1")){
							if( request.getParameter("residue1").equals("N-term") ){
							if( request.getParameter("position1").equals("ANYWHERE") || request.getParameter("position1").endsWith("C_TERM") )
								addState= 0;
						}
						else if( request.getParameter("residue1").equals("C-term") ){
							if( request.getParameter("position1").equals("ANYWHERE") || request.getParameter("position1").endsWith("N_TERM") )
								addState= 0;
						}
						}
						else{
							addState= 0;
						}
						
					} catch (NumberFormatException e) {
						addState= 3;
						massState = 1;
						//alert("Failed to add : mass difference should be real number.");
					}					
				}
			}

			if( addState == 0 ){	
				if(request.getParameter("residue1").equals("N-term")){
					String position="ANY_N_TERM";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name1") + "', " + request.getParameter("mass1") + ", '" + request.getParameter("residue1") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}
				else if(request.getParameter("residue1").equals("C-term")){
					String position="ANY_C_TERM";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name1") + "', " + request.getParameter("mass1") + ", '" + request.getParameter("residue1") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}
				else{
				String position="ANYWHERE";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name1") + "', " + request.getParameter("mass1") + ", '" + request.getParameter("residue1") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}

				Statement state = conn.createStatement();
				ResultSet rs = state.executeQuery("select max(id) from px_modification where user_id="+id+" and name='"+request.getParameter("name1")+"' and mass_diff="+request.getParameter("mass1")+ ";");
				while (rs.next()){
					
					String sql="insert into px_user_modification values "+"(" + id + ", " + rs.getInt(1) + ", " + var + ", " + engine + ");";
					PreparedStatement ps = conn.prepareStatement(sql);
					ps.executeUpdate();
					ps.close();
					finished = true;
				}
				rs.close();
				state.close();

			}
		}
		
		action = request.getParameter("act2");
		if (action == null){
				action = "";
				addState=10;
		}
		
			if (action.compareTo("add2") == 0)
		{
			if( request.getParameter("name2") == "" ){
				addState= 1;
			}
			else if( request.getParameter("name2").contains("|") || request.getParameter("name2").contains(" ") ){
				addState = 5;
			}
			else{
				if( request.getParameter("mass2") == "" ){
					addState= 2;
				}
				else{				
					try {
						Double.parseDouble( request.getParameter("mass2") );
						if(var.equals("1")){
							if( request.getParameter("residue2").equals("N-term") ){
							if( request.getParameter("position2").equals("ANYWHERE") || request.getParameter("position2").endsWith("C_TERM") )
								addState= 0;
						}
						else if( request.getParameter("residue2").equals("C-term") ){
							if( request.getParameter("position2").equals("ANYWHERE") || request.getParameter("position2").endsWith("N_TERM") )
								addState= 0;
						}
						}
						else{
							addState= 0;
						}
						
					} catch (NumberFormatException e) {
						addState= 3;
												massState = 1;

					}					
				}
			}

			if( addState == 0 ){	
				if(request.getParameter("residue1").equals("N-term")){
					String position="ANY_N_TERM";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name2") + "', " + request.getParameter("mass2") + ", '" + request.getParameter("residue2") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}
				else if(request.getParameter("residue2").equals("C-term")){
					String position="ANY_C_TERM";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name2") + "', " + request.getParameter("mass2") + ", '" + request.getParameter("residue2") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}
				else{
				String position="ANYWHERE";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name2") + "', " + request.getParameter("mass2") + ", '" + request.getParameter("residue2") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}

				Statement state = conn.createStatement();
				ResultSet rs = state.executeQuery("select max(id) from px_modification where user_id="+id+" and name='"+request.getParameter("name2")+"' and mass_diff="+request.getParameter("mass2")+ ";");
				while (rs.next()){
					
					String sql="insert into px_user_modification values "+"(" + id + ", " + rs.getInt(1) + ", " + var + ", " + engine + ");";
					PreparedStatement ps = conn.prepareStatement(sql);
					ps.executeUpdate();
					ps.close();
					finished = true;
				}
				rs.close();
				state.close();
			}
		}	
		action = request.getParameter("act3");
		if (action == null){
				action = "";
				addState=11;
		}
		if (action.compareTo("add3") == 0)
		{
			if( request.getParameter("name3") == "" ){
				addState= 1;
			}
			else if( request.getParameter("name3").contains("|") || request.getParameter("name3").contains(" ") ){
				addState = 5;
			}
			else{
				if( request.getParameter("mass3") == "" ){
					addState= 2;
				}
				else{				
					try {
						Double.parseDouble( request.getParameter("mass3") );
						if(var.equals("1")){
							if( request.getParameter("residue3").equals("N-term") ){
							if( request.getParameter("position3").equals("ANYWHERE") || request.getParameter("position3").endsWith("C_TERM") )
								addState= 0;
						}
						else if( request.getParameter("residue3").equals("C-term") ){
							if( request.getParameter("position3").equals("ANYWHERE") || request.getParameter("position3").endsWith("N_TERM") )
								addState= 0;
						}
						}
						else{
							addState= 0;
						}
						
					} catch (NumberFormatException e) {
						addState= 3;
												massState = 1;
					}					
				}
			}

			if( addState == 0 ){	
				if(request.getParameter("residue3").equals("N-term")){
					String position="ANY_N_TERM";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name3") + "', " + request.getParameter("mass3") + ", '" + request.getParameter("residue3") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}
				else if(request.getParameter("residue3").equals("C-term")){
					String position="ANY_C_TERM";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name3") + "', " + request.getParameter("mass3") + ", '" + request.getParameter("residue3") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}
				else{
				String position="ANYWHERE";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name3") + "', " + request.getParameter("mass3") + ", '" + request.getParameter("residue3") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}

				Statement state = conn.createStatement();
				ResultSet rs = state.executeQuery("select max(id) from px_modification where user_id="+id+" and name='"+request.getParameter("name3")+"' and mass_diff="+request.getParameter("mass3")+ ";");
				while (rs.next()){
					
					String sql="insert into px_user_modification values "+"(" + id + ", " + rs.getInt(1) + ", " + var + ", " + engine + ");";
					PreparedStatement ps = conn.prepareStatement(sql);
					ps.executeUpdate();
					ps.close();
					finished = true;
				}
				rs.close();
				state.close();
			}
		}	
		action = request.getParameter("act4");
		if (action == null){
				action = "";
				addState=12;
		}
		if (action.compareTo("add4") == 0)
		{
			if( request.getParameter("name4") == "" ){
				addState= 1;
			}
			else if( request.getParameter("name4").contains("|") || request.getParameter("name4").contains(" ") ){
				addState = 5;
			}
			else{
				if( request.getParameter("mass4") == "" ){
					addState= 2;
				}
				else{				
					try {
						Double.parseDouble( request.getParameter("mass4") );
						if(var.equals("1")){
							if( request.getParameter("residue4").equals("N-term") ){
							if( request.getParameter("position4").equals("ANYWHERE") || request.getParameter("position4").endsWith("C_TERM") )
								addState= 0;
						}
						else if( request.getParameter("residue4").equals("C-term") ){
							if( request.getParameter("position4").equals("ANYWHERE") || request.getParameter("position4").endsWith("N_TERM") )
								addState= 0;
						}
						}
						else{
							addState= 0;
						}
						
					} catch (NumberFormatException e) {
						addState= 3;
												massState = 1;
					}					
				}
			}

			if( addState == 0 ){	
				if(request.getParameter("residue4").equals("N-term")){
					String position="ANY_N_TERM";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name4") + "', " + request.getParameter("mass4") + ", '" + request.getParameter("residue4") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}
				else if(request.getParameter("residue4").equals("C-term")){
					String position="ANY_C_TERM";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name4") + "', " + request.getParameter("mass4") + ", '" + request.getParameter("residue4") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}
				else{
				String position="ANYWHERE";
				PreparedStatement ps = conn.prepareStatement("insert into px_modification (user_id, name, mass_diff, residue, position) values (" + id + ", '" + request.getParameter("name4") + "', " + request.getParameter("mass4") + ", '" + request.getParameter("residue4") + "', '" + position + "');");
				ps.executeUpdate();
				ps.close();
				}

				Statement state = conn.createStatement();
				ResultSet rs = state.executeQuery("select max(id) from px_modification where user_id="+id+" and name='"+request.getParameter("name4")+"' and mass_diff="+request.getParameter("mass4")+ ";");
				while (rs.next()){
					
					String sql="insert into px_user_modification values "+"(" + id + ", " + rs.getInt(1) + ", " + var + ", " + engine + ");";
					PreparedStatement ps = conn.prepareStatement(sql);
					ps.executeUpdate();
					ps.close();
					finished = true;
				}
				rs.close();
				state.close();
			}
		}
		else if (common.compareTo("submit") == 0)
		{
			
			String sql = "insert into px_user_modification values ";
			String[] values = request.getParameterValues("mod");
			int count=0;
			for (int i = 0; i < values.length; i++)
			{	
				Statement state = conn.createStatement();
				ResultSet rs = state.executeQuery("select mod_id from px_user_modification where user_id="+id+" and variable=0;");
				int flag=0;
				while (rs.next()){
					if(rs.getInt(1)==Integer.parseInt(values[i])){
						flag=1;
					}
					else{
						flag=0;
					}
				}
				if(flag==0){
					count++;
					if (count != 1)
						sql += ", ";
					sql += "(" + id + ", " + values[i] + ", " + var + ", " + engine + ")";
				}				
				
				rs.close();
				state.close();
			}
			
			if(count!=0){
				PreparedStatement ps = conn.prepareStatement(sql + ";");
				ps.executeUpdate();			
				ps.close();
			}
			finished = true;
		}
		else if (action.length() > 0)
		{
			PreparedStatement ps = conn.prepareStatement("delete from px_modification where id=" + action + ";");
			ps.executeUpdate();
			ps.close();
		}
	}
%>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=euc-kr" />
<title>PRIX - PRoteome InformatiX</title>
<link href="/css/home.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
function checkAll(obj, flag) {
	if (obj != null)
	{
		if (obj.length > 0)
		{
			for (i = 0; i < obj.length; i++)
				obj[i].checked = flag;
		}
		else
			obj.checked = flag;
	}
}

var checkAllClick = false;
function checkAllMods() {
	checkAllClick = !checkAllClick;
	var obj = document.mod_list.mod;
	checkAll(obj, checkAllClick);
	return true;
}

function uncheck(obj) {
	if (checkAllClick && !obj.checked)
	{
		checkAllClick = false;
		document.mod_list.check_all.checked = false;
	}
}

function doDelete(id) {
	document.mod_list.act.value = id;
	document.mod_list.action = 'fix_ptms_list.jsp';
	document.mod_list.submit();
	return true;
}
function masswarning() {
	alert("Failed to add : mass difference should be real number.");
}

function doSubmit() {
	var obj = document.mod_list.mod;
	var filled = false;
	if (obj != null)
	{
		if (obj.length > 0)
		{
			for (i = 0; i < obj.length; i++)
				if (obj[i].checked)
					filled = true;
		}
		else
		{
			if (obj.checked)
				filled = true;
		}
	}
	if (filled)
	{	
		document.mod_list.action = 'fix_ptms_list.jsp';
		document.mod_list.submit();
	}
	else
	{
		//alert('Please select modifications.');
	}
}


</script>
</head>


<body <% if (id == null) out.print("onload='opener.opener.location = \"../login.jsp?url=modplus/search.jsp\"; opener.close(); window.close();'"); else if (finished) out.print("onload='opener.location = \"var_ptms_list.jsp?var=" + var + "&engine=" + engine + "&id=" + id + "\"; opener.opener.location.reload();'"); %>>

<form name="mod_list" method="post" action="javascript:doSubmit();">
<input type="hidden" name="act" value="submit"/>
<input type="hidden" name="var" value="<%=var%>"/>
<input type="hidden" name="engine" value="<%=engine%>"/>
<table border="0" cellspacing="0" cellpadding="0" id="TitTable">
  <tr>
    <td style="padding-left:15px;"><font class="blueB" size="2">Common fixed Modification </font>
	</td>
  </tr>
</table>
<table width="95%" border="0" align="center" cellpadding="0" cellspacing="0" style="BORDER-BOTTOM: #d9dddc 1px solid; BORDER-TOP: #d9dddc 2px solid; ">
    <tr>
      <td class="grayTH"><div align="center"><input name="check_all" type="checkbox" class="CHECK" onclick="checkAllMods()" /></div></td>      
      <td class="grayTH"><div align="center">Site </div></td>
      <td class="grayTH" >Name </div></td>
      <td class="grayTH"><div align="right">Mass </div></td>

      
<!--       <td class="grayTH"><div align="center">Position </div></td>
      	  <td class="grayTH"><div align="right">Delete </div></td> -->
          </tr>
      <%
      	if (id != null && conn != null)
      	{
      		Statement state = conn.createStatement();
      		//ResultSet rs = state.executeQuery("select id, name, mass_diff, residue, position from px_modification where user_id=" + id + ("1".equals(var)? "" : " and position='ANYWHERE'") + " and id not in (select mod_id from px_user_modification where user_id=" + id + " and engine=" + engine + ");");
			ResultSet rs =  state.executeQuery("select id, name, mass_diff, residue, position from px_modification where user_id=999;");
		
      		while (rs.next())
      		{
      %>
          <tr onMouseOver="this.style.backgroundColor='#f7f7f7'" onMouseOut="this.style.backgroundColor='#ffffff'" >
      <td class="grayTD"><div align="center"><input name="mod" type="checkbox" class="CHECK" value="<%=rs.getInt(1)%>" onclick="uncheck(this);" /></div></td>
	        <td class="grayTD"><div align="center"><%=rs.getString(4)%></div></td>
      <td class="grayTD"><%=rs.getString(2)%></div></td>
      <td class="grayTD"><div align="right"><%=rs.getDouble(3)%></div></td>

 <!-- <td class="grayTD"><div align="center"><%=rs.getString(5)%></div></td> -->
      	  
          </tr>
<%
		}		
		rs.close();
		state.close();
		conn.close();
	}
%>

    <!--tr onMouseOver="this.style.backgroundColor='#f7f7f7'" onMouseOut="this.style.backgroundColor='#ffffff'" >
      <td class="grayTD"><div align="center"><input name="_60" type="checkbox" class="CHECK" /></div></td>
      <td class="grayTD">Nterm+12</div></td>
      <td class="grayTD"><div align="right">12.0000</div></td>
      <td class="grayTD"><div align="center">N-term</div></td>
      <td class="grayTD"><div align="center">ANY_N_TERM</div></td>
	  <td align="right" class="grayTD"><input name="delete_enzyme_i1" type="button" class="btnBlueSmall" value=" del " /></td>
    </tr-->
    
</table>
<table width="95%" border="0" align="center" cellpadding="1">
 	<tr>

	  <td align="right">
  		  <input name="button222" type="submit" value=" Apply " />	  



	  </td>
	</tr>
</table>


</form>

<form method="post" action="fix_ptms_list.jsp">
<input type="hidden" name="act" value="add"/>
<input type="hidden" name="var" value="<%=var%>"/>
<input type="hidden" name="engine" value="<%=engine%>"/>
<table width="95%" border="0" align="center" cellpadding="1">
 	<tr>
      <td align="left"><font class="blue"><em>Define new modification</em></font></td>

	</tr>
</table>
<table width="95%" border="0" align="center" cellpadding="0" cellspacing="0" id="gray" style="BORDER-BOTTOM: #d9dddc 1px solid; BORDER-TOP: #d9dddc 2px solid; ">
<tbody>
      <tr>
	          <td class="grayTH">Site</td>
        <td class="grayTH">Name</td>
        <td class="grayTH">Mass Difference</td>

		<td class="grayTH"></td>

		
      </tr>
  
      <tr>
	  		<td ><select id="residue1" name="residue1">

			<option value="N-term">N-term</option>
			<option value="C-term">C-term</option>
			<option value="A">A</option>
			<option value="C">C</option>
			<option value="D">D</option>
			<option value="E">E</option>
			<option value="F">F</option>
			<option value="G">G</option>
			<option value="H">H</option>
			<option value="I">I</option>
			<option value="K">K</option>
			<option value="L">L</option>
			<option value="M">M</option>
			<option value="N">N</option>
			<option value="P">P</option>
			<option value="Q">Q</option>
			<option value="R">R</option>
			<option value="S">S</option>
			<option value="T">T</option>
			<option value="V">V</option>
			<option value="W">W</option>
			<option value="Y">Y</option>
        </select></td>
		<td><input id="nam1e" name="name1" size="15"/></td>
		<td><input id="massDiff1" name="mass1"size="10" /></td>
		<input type="hidden" id="act1" name="act1" value="add1"/>
		<!-- <td align="right"><input name="btn145" type="submit" class="btnOrgSmall" value=" add " /></td> -->
				
      </tr>
	   <tr>
	  		<td ><select id="residue2" name="residue2">

			<option value="N-term">N-term</option>
			<option value="C-term">C-term</option>
			<option value="A">A</option>
			<option value="C">C</option>
			<option value="D">D</option>
			<option value="E">E</option>
			<option value="F">F</option>
			<option value="G">G</option>
			<option value="H">H</option>
			<option value="I">I</option>
			<option value="K">K</option>
			<option value="L">L</option>
			<option value="M">M</option>
			<option value="N">N</option>
			<option value="P">P</option>
			<option value="Q">Q</option>
			<option value="R">R</option>
			<option value="S">S</option>
			<option value="T">T</option>
			<option value="V">V</option>
			<option value="W">W</option>
			<option value="Y">Y</option>
        </select></td>
		<td><input id="name2" name="name2" size="15"/></td>
		<td><input id="massDiff2" name="mass2"size="10" /></td>
		<input type="hidden" id="act2" name="act2" value="add2"/>
		<!-- <td align="right"><input name="btn145" type="submit" class="btnOrgSmall" value=" add " /></td> -->
				
      </tr>
	   <tr>
	  		<td ><select id="residue3" name="residue3">

			<option value="N-term">N-term</option>
			<option value="C-term">C-term</option>
			<option value="A">A</option>
			<option value="C">C</option>
			<option value="D">D</option>
			<option value="E">E</option>
			<option value="F">F</option>
			<option value="G">G</option>
			<option value="H">H</option>
			<option value="I">I</option>
			<option value="K">K</option>
			<option value="L">L</option>
			<option value="M">M</option>
			<option value="N">N</option>
			<option value="P">P</option>
			<option value="Q">Q</option>
			<option value="R">R</option>
			<option value="S">S</option>
			<option value="T">T</option>
			<option value="V">V</option>
			<option value="W">W</option>
			<option value="Y">Y</option>
        </select></td>
		<td><input id="name3" name="name3" size="15"/></td>
		<td><input id="massDiff3" name="mass3"size="10" /></td>
		<input type="hidden" id="act3" name="act3" value="add3"/>
		<!-- <td align="right"><input name="btn145" type="submit" class="btnOrgSmall" value=" add " /></td> -->
				
      </tr>
	   <tr>
	  		<td ><select id="residue4" name="residue4">

			<option value="N-term">N-term</option>
			<option value="C-term">C-term</option>
			<option value="A">A</option>
			<option value="C">C</option>
			<option value="D">D</option>
			<option value="E">E</option>
			<option value="F">F</option>
			<option value="G">G</option>
			<option value="H">H</option>
			<option value="I">I</option>
			<option value="K">K</option>
			<option value="L">L</option>
			<option value="M">M</option>
			<option value="N">N</option>
			<option value="P">P</option>
			<option value="Q">Q</option>
			<option value="R">R</option>
			<option value="S">S</option>
			<option value="T">T</option>
			<option value="V">V</option>
			<option value="W">W</option>
			<option value="Y">Y</option>
        </select></td>
		<td><input id="name4" name="name4" size="15"/></td>
		<td><input id="massDiff4" name="mass4"size="10" /></td>
		<input type="hidden" id="act4" name="act4" value="add4"/>

				
      </tr>
	  <tr>
	  		<!-- <td align="right"><input name="btn145" type="submit" class="btnOrgSmall" value=" add " /></td> -->
		</tr>
	 </tbody>
  </table>
  <table width="95%" border="0" align="center" cellpadding="1">
 	<tr>
	<table width="95%" border="0" align="center" cellpadding="1">
 	<tr>

	  <td align="right">
		      <input name="button222" type="reset"  value="Reset">
  		  <input name="button222" type="submit" value=" Apply " />	  



	  </td>
	</tr>
</table>

	</tr>
</table>

</form>


<% 
    if ( massState == 1 )
	{
%>
		<script type="text/javascript">alert("Failed to add : mass difference should be real number.");</script>
<%
	} 
%>
<% 
    if ( addState == 1 )
	{
%>
	<font class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Failed to add : modification name is empty.</font>
<%
	} 
	else if ( addState == 5 )
	{
%>
	<font class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Failed to add : Character '|' and white space cannot be used in name.</font>
<%
	} 
	else if ( addState == 2 )
	{
%>
	<font class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Failed to add : mass difference is empty.</font>
<%  
	} 
	else if ( addState == 3 )
	{
		
%>
	<font class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Failed to add : mass difference should be real number.</font>
	
<%  
	}
	else if ( addState == 4 )
	{
%>
	<font class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Failed to add : site is inconsistent with its position.<br>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If site is N-term, its position should be either ANY_N_TERM or PROTEIN_N_TERM.</font>
<%   
	}
	else if ( addState == 10 )
	{
%>
	<font class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sucess to add : 1 modification </font>
<%   
	}
	else if ( addState == 11 )
	{
%>
	<font class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sucess to add : 2 modification </font><%   
	}
	else if ( addState == 12 )
	{
%>
	<font class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sucess to add : 3 modification </font><%   
	}
%>
 <br/>
 <br/>



<!-- <jsp:include page="/inc/pop_footer.jsp" flush="true" /> -->
</body>


</html>
