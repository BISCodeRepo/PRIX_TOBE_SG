<%@ page import="javax.naming.Context" %>
<%@ page import="javax.naming.InitialContext" %>
<%@ page import="javax.sql.DataSource" %>
<%@ page import="java.sql.Connection" %>
<%@ page import="java.sql.Statement" %>
<%@ page import="java.sql.ResultSet" %>

<%
	final String anony = "4";
	String id = (String)session.getAttribute("id");
	if (id == null){
		session.setAttribute("id", anony);
		id = (String)session.getAttribute("id");
	}

	Context initContext = new InitialContext();
	Context envContext = (Context)initContext.lookup("java:/comp/env");
	DataSource ds = (DataSource)envContext.lookup("jdbc/PrixDB");
	Connection conn = ds.getConnection();
	String result = "";
	if (conn != null)
	{
		Statement state = conn.createStatement();
		ResultSet rs = state.executeQuery("select id, name from px_enzyme where user_id=" + id + ";");
		while (rs.next())
		{
			result += rs.getString(2) + ":" + rs.getInt(1) + ",";
		}
		rs.close();
		state.close();
		conn.close();
	}
	out.print(result);
%>